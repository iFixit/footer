import { Meta, Canvas, Story } from '@storybook/addon-docs/blocks';
import { Footer } from './Footer';
import { Divider, DividerOrientation } from './Divider';
import { FooterLink } from './FooterLink';
import { Stack } from './Stack';
import { Grid, GridItem } from './Grid';
import { Popover, PopoverTrigger, PopoverContent } from './Popover';
import { FooterPartner } from './FooterPartner';
import { FooterList, FooterListItem, FooterListIcon } from './FooterList';
import { DropdownTrigger, DropdownTriggerTag } from './DropdownTrigger';
import { Icon } from './Icon';
import styled from 'styled-components';
import { fontFamily, fontWeight, space, color, borderRadius } from '@core-ds/primitives';
import {
   StoreDropdown,
   StoreFlag,
   Dropdown,
   LanguageDropdownContainer,
} from '@ifixit/product-page-components';
import stores from './stores.json';
import languages from './languages.json';
import links from './links.json';
import partners from './partners.json';

<Meta title="Footer" />

export const DemoPage = styled.div`
   display: flex;
   flex-direction: column;
   font-family: ${fontFamily.inter};
   margin-top: 100px;
`;

export const StoreSelector = ({ stores, onClickStore, ...tippyOptions }) => {
   const currentStore = stores.find((store) => store.isDisplayStore);
   return (
      <Dropdown icon={<StoreFlag storeCode={currentStore.storeCode} />} {...tippyOptions}>
         <StoreDropdown currentStore={currentStore} stores={stores} onClickStore={onClickStore} />
      </Dropdown>
   );
};

# iFixit footer

A set of components to compose iFixit.com and Shopify store footer.

<Canvas>
   <Story name="Default footer">
      {(args) => (
         <DemoPage>
            <Footer>
               <Grid
                  templateColumns={{ base: '1fr', sm: 'repeat(3, 1fr)', lg: 'repeat(4, 1fr)' }}
                  gap={space[4]}
                  paddingX={{
                     base: space[5],
                     sm: space[7],
                  }}
                  paddingY={space[7]}
               >
                  {links.map((list, index) => (
                     <FooterList
                        key={index}
                        borderBottom={{
                           base: `1px solid ${color.gray8}`,
                           sm: 'none',
                        }}
                        paddingBottom={{
                           base: space[4],
                           sm: '0',
                        }}
                     >
                        {list.map((link, linkIndex) => (
                           <FooterListItem key={linkIndex}>
                              <FooterLink href={link.url} fontWeight={fontWeight.bold}>
                                 {link.label}
                              </FooterLink>
                           </FooterListItem>
                        ))}
                     </FooterList>
                  ))}
                  <FooterList
                     borderBottom={{
                        base: `1px solid ${color.gray8}`,
                        sm: 'none',
                     }}
                     paddingBottom={{
                        base: space[4],
                        sm: '0',
                     }}
                  >
                     <FooterListItem>
                        <FooterListIcon
                           alt="Facebook logo"
                           source="https://uploads-ssl.webflow.com/5c9b91208becd3baee84a04b/5f690fbe9673a45e28ed13ef_facebook.svg"
                        />
                        <FooterLink href="#" fontWeight={fontWeight.bold}>
                           Facebook
                        </FooterLink>
                     </FooterListItem>
                     <FooterListItem>
                        <FooterListIcon
                           alt="Facebook logo"
                           source="https://uploads-ssl.webflow.com/5c9b91208becd3baee84a04b/5f690fbef76e380c31ad25f0_twitter.svg"
                        />
                        <FooterLink href="#" fontWeight={fontWeight.bold}>
                           Twitter
                        </FooterLink>
                     </FooterListItem>
                  </FooterList>
                  <GridItem
                     columnEnd={{ sm: 'span 3', lg: 'auto' }}
                     marginTop={{ base: space[6], lg: 'unset' }}
                     justify="center"
                  >
                     <Grid templateColumns="repeat(3, 1fr)" gap={space[4]}>
                        {partners.map((partner, partnerIndex) => (
                           <FooterLink href="#" key={partnerIndex}>
                              <FooterPartner alt={partner.name} source={partner.logo} />
                           </FooterLink>
                        ))}
                     </Grid>
                  </GridItem>
               </Grid>
               <Divider />
               <Grid
                  templateColumns={{ base: '1fr', lg: 'repeat(2, 1fr)' }}
                  gap={space[4]}
                  paddingX={space[7]}
                  paddingY={space[5]}
               >
                  <GridItem justify={{ base: 'center', lg: 'start' }}>
                     <Stack spacing={space[8]}>
                        <StoreSelector
                           stores={stores}
                           onClickStore={(store) => console.log(store)}
                           placement="top-end"
                        />
                        <LanguageDropdownContainer
                           languages={languages}
                           translationPreferencesUrl="https://www.cominor.com/Login"
                           machineTranslationRequested={false}
                           placement="top-end"
                        />
                        <FooterLink href="#">
                           <Stack spacing={space[2]} align="center">
                              <span style={{ whiteSpace: 'nowrap' }}>Help translate</span>
                              <Icon
                                 alt="Translate icon"
                                 source="https://uploads-ssl.webflow.com/5c9b91208becd3baee84a04b/5f68f6fab1ac0b141961dbab_globe.svg"
                              />
                           </Stack>
                        </FooterLink>
                     </Stack>
                  </GridItem>
                  <GridItem justify={{ base: 'center', lg: 'end' }} align="center">
                     <Stack align="stretch" spacing={space[4]}>
                        <FooterLink href="#">Licensed under Creative Commons</FooterLink>
                        <Divider orientation={DividerOrientation.Vertical} />
                        <FooterLink href="#">Privacy</FooterLink>
                        <Divider orientation={DividerOrientation.Vertical} />
                        <FooterLink href="#">Legal</FooterLink>
                     </Stack>
                  </GridItem>
               </Grid>
            </Footer>
         </DemoPage>
      )}
   </Story>
</Canvas>
